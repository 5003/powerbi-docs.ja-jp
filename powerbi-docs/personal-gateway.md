---
title: Power BI Gateway - Personal
description: Power BI Gateway - Personal
services: powerbi
documentationcenter: 
author: davidiseminger
manager: kfile
backup: 
editor: 
tags: 
qualityfocus: no
qualitydate: 
ms.service: powerbi
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: powerbi
ms.date: 09/06/2017
ms.author: davidi
ms.openlocfilehash: b1cb5bda9b80cb08ece111959884b840ff8d42cc
ms.sourcegitcommit: 284b09d579d601e754a05fba2a4025723724f8eb
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/15/2017
---
# <a name="power-bi-gateway---personal"></a>Power BI Gateway - Personal
> [!NOTE]
> Power BI には、**オンプレミス データ ゲートウェイ (個人用モード)** と呼ばれる、新しいバージョンの Personal Gateway があります。 この記事では、**Power BI Gateway - Personal** と呼ばれる以前のバージョンのパーソナル ゲートウェイについて説明します。このゲートウェイは、2017 年 7 月 31 日に廃止され、以降動作しなくなります。 新しいバージョンのインストール方法など、新しいパーソナル ゲートウェイの詳細については、「[**オンプレミス データ ゲートウェイ (個人用モード)**](service-gateway-personal-mode.md)」を参照してください。
> 
> 

**Power BI Gateway - Personal** はブリッジとして機能し、[更新](refresh-data.md)をサポートするオンプレミス データ ソースと Power BI サービスとの間でデータ転送を迅速かつ安全に行います。 この記事は、ゲートウェイのしくみに対する理解を深め、ゲートウェイが必要かどうかを適切に判断できるようにすることを目的としています。 さらに、パーソナル ゲートウェイに関する[役立つビデオ](https://www.youtube.com/watch?v=de58vROLqZI)も提供しています。 

コンピューターにインストールされると、サービスとして実行されます。 サービスとして実行される場合には、構成時に指定する Windows アカウントが使用されます。 ゲートウェイは、アプリケーションとして実行されることもあります。 これについては、後で詳しく説明します。

Power BI がオンプレミス データ ソースからのデータを更新すると、ゲートウェイの指示に従って、Power BI アカウントが必ず適切なアクセス許可を使用してソースに接続し、ソース データを照会します。

Power BI とゲートウェイ間のデータ転送は、[Azure Service Bus](http://azure.microsoft.com/documentation/services/service-bus/) を介してセキュリティで保護されます。 Service Bus は、Power BI サービスとコンピューター間のセキュリティ チャネルを作成します。 ゲートウェイはこの安全な接続を提供するため、通常はファイアウォールでポートを開く必要はありません。

ゲートウェイの詳細説明に進む前に、Power BI で使用されるいくつかの用語を確認してみましょう。

*データセット* とは、オンラインまたはオンプレミス データ ソースから Power BI サービスにアップロードされるデータのことです。 データセットは、[データの取得] を使用してデータに接続しアップロードするときに作成されます。 データセットは、ブラウザーでは Power BI ワークスペースの [マイ ワークスペース] ウィンドウに表示されます。 レポートを作成し、タイルをダッシュボードにピン留めすると、データセットから取得したデータが表示されます。

*データ ソース*とは、データセットにアップロードするデータの取得元のことです。 たとえば、データベース、Excel ワークシート、Web サービスなど、あらゆるものがデータ ソースになり得ます。Excel ブックの場合は、データの行で構成された単純なワークシートを作成すると、それがデータ ソースと見なされます。 また、Excel の Power Query または Power Pivot を使用して、オンラインとオンプレミスの両方のデータ セットに接続し、それらのデータを照会することもできます。このすべての処理を 1 つのブック内だけで行うことができます。 Power BI Desktop では、[データの取得] を使用して、オンラインとオンプレミスの両方のデータ ソースに接続し、それらのデータを照会できます。

Personal Gateway は、オンプレミス データ ゲートウェイを通じてインストールされます。 [Power BI Gateway のページ](https://powerbi.microsoft.com/gateway/) からダウンロードできます。

## <a name="do-i-need-a-gateway"></a>ゲートウェイは必要ですか?
ゲートウェイをインストールする前に、実際に必要なのかどうかを見極めることが重要です。 これはデータ ソースに応じて異なります。

### <a name="on-premises-data-sources"></a>オンプレミス データ ソース
組織内でサポートされているオンプレミス データ ソースからデータを取得するデータセットを更新するためには、パーソナル ゲートウェイが*必要です*。

次の場所からアップロードされたデータセットに対しては、ゲートウェイがあることよって [今すぐ更新] および [更新のスケジュール設定] を使用できます。

* サポートされているオンプレミス データ ソースに接続し、そのデータを照会するために、Power Query または Power Pivot を使用する Microsoft Excel 2013 (またはそれ以降) のブック。 Power Query または Power Pivot で [外部データの取り込み] を実行して表示されるすべてのオンプレミス データ ソースは、Hadoop ファイル (HDFS) と Microsoft Exchange 以外の更新をサポートします。
* サポートされているオンプレミス データ ソースに接続し、そのデータを照会するために、[データの取得] が使用される Microsoft Power BI Desktop ファイル。 [データの取得] を実行して表示されるすべてのオンプレミス データ ソースは、Hadoop ファイル (HDFS) と Microsoft Exchange 以外の更新をサポートします。

### <a name="online-data-sources"></a>オンライン データ ソース
ゲートウェイは、[**Web.Page**](https://msdn.microsoft.com/library/mt260924.aspx) 関数を使用している場合に*のみ必要*です。 それ以外の場合、オンライン データ ソースからのみデータを取得するデータセットを更新するための、ゲートウェイは*必要ありません*。

> [!NOTE]
> [**Web.Page**](https://msdn.microsoft.com/library/mt260924.aspx) 関数を使用している場合、2016 年 11 月 18 日より後にデータセットまたはレポートの再発行を行った場合にのみゲートウェイが必要です。
> 
> 

次の場所からアップロードされたデータセットに対しては、ゲートウェイがなくても [今すぐ更新] および [更新のスケジュール設定] を使用できます。

* オンライン データ ソース (コンテンツ パック\\サービス) から取得したコンテンツ パック。 既定では、コンテンツ パックから取得したデータセットは、毎日 1 回自動更新されますが、手動で更新したり、更新スケジュールを設定したりすることもできます。
* オンライン データ ソースに接続し、そのデータを照会するために、Power Query または Power Pivot が使用される Microsoft Excel 2013 (またはそれ以降) のブック。
* オンライン データ ソースに接続し、そのデータを照会するために、[データの取得] が使用される Microsoft Power BI Desktop ファイル。

**質問:** Excel ブックまたは Power BI Desktop ファイルがオンラインとオンプレミスの両方のデータ ソースからデータを取得する場合、ゲートウェイは必要ですか?

**回答**: ゲートウェイは*必要です*。 オンプレミス データ ソースからのデータを更新するために、ゲートウェイをインストールし構成する必要があります。

**質問:** Excel ブックに、入力したデータ行しか含まれていない場合、ゲートウェイは必要ですか?**

**回答**: ゲートウェイは*必要ありません*。 ゲートウェイをインストールし構成する必要があるのは、ブックの Power Query または Power Pivot を使用して、サポートされているオンプレミス データ ソースを照会し、そのデータをデータ モデルへ読み込む場合だけです。

## <a name="setting-up-a-gateway-for-the-first-time"></a>ゲートウェイの初回セットアップ
ゲートウェイの初回セットアップは、次の 3 ステップで行います。

1. ゲートウェイをダウンロードしてインストールする
2. ゲートウェイを構成する
3. Power BI でデータ ソースにサインインする

各ステップを詳しく見てみましょう。

### <a name="download-and-install-a-gateway"></a>ゲートウェイをダウンロードしてインストールする
> [!NOTE]
> Power BI には、**オンプレミス データ ゲートウェイ (個人用モード)** と呼ばれる、新しいバージョンの Personal Gateway があります。 この記事では、**Power BI Gateway - Personal** と呼ばれる以前のバージョンのパーソナル ゲートウェイについて説明します。このゲートウェイは、2017 年 7 月 31 日に廃止され、以降動作しなくなります。 新しいバージョンのインストール方法など、新しいパーソナル ゲートウェイの詳細については、「[**オンプレミス データ ゲートウェイ (個人用モード)**](service-gateway-personal-mode.md)」を参照してください。
> 
> 

サポートされているデータセットについて [今すぐ更新] または [更新のスケジュール設定] を初めてクリックすると、ゲートウェイをインストールするように求められます。 または、ゲートウェイをダウンロードするには、[ダウンロード] メニューで **[データ ゲートウェイ]** を選択します。 [オンプレミス データ ゲートウェイ](http://go.microsoft.com/fwlink/?LinkID=820925)をダウンロードします。

自分用のゲートウェイを設定するには、**[オンプレミス データ ゲートウェイ]** ではなく **[Personal Gateway]** を選択します。

ゲートウェイのインストールは難しい作業ではありません。 他のアプリケーションの場合と同様に、インストール先を選択し、使用許諾契約書に同意します。 ただし、いくつか注意すべき点があります。 具体的には、ゲートウェイをインストールする先のコンピューターの種類、およびそのコンピューターで Windows にログインするときに使用するアカウントの種類です。

> [!NOTE]
> ゲートウェイはデータ ソースにアクセスする必要があります。 個人用コンピューターからデータ ソースに接続できない場合は、データ ソースにアクセスできるコンピューターに[オンプレミスの Data Gateway](service-gateway-onprem.md)をインストールすることをおすすめします。 たとえば、Azure でホストされている仮想マシン (VM) に SQL Server をインストールします。 個人用コンピューターで VM にアクセスできない場合があります。 その場合は VM にオンプレミス データ ゲートウェイをインストールし、Power BI サービス内でデータ ソースを構成することができます。
> 
> 

### <a name="computer-type"></a>コンピューターの種類
ゲートウェイをインストールする先のコンピューターの種類は重要です。

> [!NOTE]
> パーソナル ゲートウェイは、64 ビット Windows オペレーティング システムでのみサポートされます。
> 
> 

ノート PC の場合 - スケジュールされた更新が確実に実行されるように、ゲートウェイを実行しておく必要があります。 ノート PC は通常、稼働中以外はシャットダウンされているかスリープ状態になっています。 ノート PC にゲートウェイをインストールした場合は、ノート PC の稼働中に更新されるよう、スケジュールを作成してください。 これを怠ると、スケジュールされている次回更新時まで更新は試行されません。

デスクトップ コンピューターの場合 - 注意すべき点はほとんどありません。 コンピューターとゲートウェイが、スケジュールされた更新時刻に稼働しているようにしてください。 多くのデスクトップ コンピューターはスリープ状態になりますが、スリープ状態のときにはスケジュール更新を実行できません。

ゲートウェイを 1 つインストールしたら、それ以上インストールする必要はありません。 1 つのゲートウェイだけで、サポートされているあらゆる数のデータセットに対応します。 ブックや Power BI Desktop ファイルをアップロードする元の同一のコンピューターに、ゲートウェイをインストールする必要はありません。 たとえば、組織内の SQL Server データ ソースに接続する Excel ブックがあるとします。 ノート PC からブックをアップロードするために、Power BI で [データの取得] を使用したとします。 常時稼働中のデスクトップ コンピューターがあり、そのコンピューターにゲートウェイをインストールし、構成しました。 Power BI では、データ ソースにサインインし、データセットの更新のスケジュールをセットアップしました。  スケジュールされた更新時刻になると、Power BI は、デスクトップ コンピューターにインストールされているゲートウェイに対し、セキュリティ保護された接続を行います。 これにより、データ ソースに安全に接続され、更新が実行されます。 更新のために、ノート PC からアップロードした元のブックとの通信は行われません。

> [!NOTE]
> パーソナル ゲートウェイとエンタープライズ ゲートウェイは同じコンピューターにインストールできます。
> 
> 

### <a name="windows-account"></a>Windows アカウント
ゲートウェイをインストールするときには、Windows アカウントを使用してコンピューターにログインする必要があります。 Windows アカウントが持つアクセス許可の種類は、ゲートウェイのインストール方法や Windows での実行方法に影響します。

Windows にログインするとき:

|  | 管理者権限がある場合 | 管理者権限がない場合 |
| --- | --- | --- |
| **Power BI Gateway - Personal を次の機能として実行** |サービス |アプリケーション |
| **スケジュールされた更新** |お使いのコンピューターとゲートウェイ サービスが実行されている限り、スケジュールされた更新ごとにログインする必要はありません。 |スケジュールされた更新ごとにコンピューターにログインする必要があります。 |
| **Windows アカウントのパスワードの変更** |ゲートウェイ サービスのパスワードを変更する必要があります。 ゲートウェイで使用されるアカウント パスワードが有効でなくなると、更新は失敗します。 |ゲートウェイは必ず、現在ログインに使用しているパスワードとアカウントで実行されます。 Windows にログインしていない場合、ゲートウェイは実行されず、更新は失敗します。 |

### <a name="configure-the-gateway"></a>ゲートウェイを構成する
インストール ウィザードが完了したら、構成ウィザードを起動するよう求められます。 ゲートウェイの構成は難しい操作ではありません。 ウィザードから Power BI にサインインする必要があります。 これは、ウィザードが Power BI サービス内の Power BI アカウントとの接続を確立するために必要です。

管理者のアクセス許可を持つアカウントを使用して Windows にログインしている場合は、Windows アカウントの資格情報を入力するよう求められます。 別の Windows アカウントを指定することもできますが、アクセス許可に応じてゲートウェイの実行方法が変わることに注意してください。 このアカウントを使用して、ゲートウェイ サービスが実行されます。

### <a name="sign-in-to-data-sources"></a>データ ソースにサインインする
構成ウィザードが完了し、ゲートウェイが稼働状態になったら、認証の種類を指定し、データセットの各データ ソースにサインインする必要があります。 この手順は Power BI で実行します。

![](media/personal-gateway/pg_dataset_settings_signin.png)

認証の種類を指定し、データ ソースにサインインする操作を 1 回だけ実行する必要があります。 データセットの [設定] 画面の **[データ ソースの管理]** セクションからサインインします。 複数のデータ ソースがある場合は、それぞれにサインインする必要があります。 ゲートウェイが、データ ソースに応じて既定の認証の種類を決定します。 ほとんどの場合は Windows 認証です。ただし、データ ソースによっては別の種類の認証が必要となることがあります。 不明な場合は、データ ソース管理者に問い合わせてください。

## <a name="up-and-running"></a>稼働中
ゲートウェイの稼働中に、データセットに対して [更新のスケジュール設定] をクリックすると、そのデータセットの [設定] ページが表示されます。

![](media/personal-gateway/pg_awintsales_settings.png)

このページには次の内容が表示されます。

1. 更新の状態 – 成功した更新、およびスケジュールされた次の更新の時刻が表示されます。
2. **ゲートウェイ** - ゲートウェイがインストールされオンラインになっているかどうかが表示されます。 ゲートウェイがインストールされているがオフラインの場合、[データ ソースの管理] および [更新のスケジュール設定] の設定は無効になります。
3. **データ ソースの管理** - データセットの接続先のデータ ソースが表示されます。 サインインするか、認証の種類を変更できます。 サインインは、データ ソースごとに 1 回だけ必要です。
4. **更新のスケジュール設定** - 更新のスケジュール設定はここで構成できます。 ゲートウェイがオンラインでない場合、これらの設定は無効になります。
5. 更新エラー通知 – このオプションは既定で選択され、スケジュールされた更新が失敗すると、電子メールを送信します。

## <a name="updating-your-windows-account-password"></a>Windows アカウントのパスワードの更新
ゲートウェイをインストールしたときに管理者特権を持つ Windows アカウントを使用してコンピューターにログインした場合、ゲートウェイは、構成ウィザードで指定した Windows アカウントを使用して、サービスとして実行されます。 ほとんどの場合、コンピューターにログインするときに使用するのと同じ Windows アカウントを使用します。 Windows アカウントのパスワードを変更した場合は、ゲートウェイでも変更する必要があります。変更しておかないと、サービスが実行されない可能性があり、更新が失敗します。 ゲートウェイの Windows アカウント パスワードを変更するには、Windows デスクトップのタスク バーまたはアプリで、パーソナル ゲートウェイのアイコンを選択します。

![](media/personal-gateway/pg_programicon.png)

ここでは、パスワードを更新でき、ゲートウェイの接続の状態を確認できます。

![](media/personal-gateway/pg_credentials.png)

## <a name="ports"></a>ポート
ゲートウェイ通信は、送信ポート TCP 443 (既定値)、5671、5672、9350 ～ 9354 で行われます。  ゲートウェイには、受信ポートは必要ありません。

| ドメイン名 | 送信ポート | 説明 |
| --- | --- | --- |
| *.powerbi.com |443 |HTTPS |
| *.analysis.windows.net |443 |HTTPS |
| *.login.windows.net |443 |HTTPS |
| *.servicebus.windows.net |5671-5672 |Advanced Message Queuing Protocol (AMQP) |
| *.servicebus.windows.net |443, 9350-9354 |TCP 上での Service Bus Relay のリスナー (Access Control のトークン取得のために 443 が必要) |
| *. frontend.clouddatahub.net |443 |HTTPS |
| *.core.windows.net |443 |HTTPS |
| login.microsoftonline.com |443 |HTTPS |
| login.windows.net |443 |HTTPS |

ドメインではなくホワイト リストの IP アドレスを設定する必要がある場合は、Microsoft Azure データセンターの IP 範囲のリストをダウンロードして使うことができます。 [ダウンロード](https://www.microsoft.com/download/details.aspx?id=41653)

## <a name="next-steps"></a>次の手順
[オンプレミス データ ゲートウェイ (個人用モード) - 新しいバージョンのパーソナル ゲートウェイ](service-gateway-personal-mode.md)

[Power BI Gateway のプロキシ設定を構成する](service-gateway-proxy.md)  
[Power BI Premium](service-premium.md)

他にわからないことがある場合は、 [Power BI コミュニティで質問してみてください](http://community.powerbi.com/)。

